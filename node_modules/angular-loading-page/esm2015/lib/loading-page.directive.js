import { Directive, Input, TemplateRef, ViewContainerRef } from '@angular/core';
import { HttpObservableService } from './interceptors/http-observable.service';
import { RouteInterceptorService } from './interceptors/route-interceptor.service';
/*
 * mkLoadingPage Directive
 */
import * as ɵngcc0 from '@angular/core';
import * as ɵngcc1 from './interceptors/http-observable.service';
import * as ɵngcc2 from './interceptors/route-interceptor.service';
export class LoadingPageDirective {
    /**
     * @method constructor
     * @param privatehttpObservableService   [description]
     * @param privaterouteInterceptorService [description]
     * @param privatetemplateRef             [description]
     * @param privateviewContainer           [description]                                              [description]
     */
    constructor(httpObservableService, routeInterceptorService, templateRef, viewContainer) {
        this.httpObservableService = httpObservableService;
        this.routeInterceptorService = routeInterceptorService;
        this.templateRef = templateRef;
        this.viewContainer = viewContainer;
        this.isPendingRequests = false;
        this.isPendingRoute = false;
        this.hasView = false;
    }
    /**
     * @method ngOnChanges
     * @param changes [description]
     */
    ngOnChanges(changes) {
        if (changes.mkLoadingPage.currentValue) {
            this.mkLoadingPage = changes.mkLoadingPage.currentValue;
        }
        if (changes.mkLoadingPage.firstChange) {
            this.init();
        }
    }
    /**
     * [init description]
     * @method init
     * @return [description]
     */
    init() {
        if (!this.mkLoadingPage || this.mkLoadingPage.checkPendingHttp) {
            this.httpObservableService.isPendingRequests.subscribe(value => {
                this.isPendingRequests = value;
                this.isVisible();
            });
        }
        if (!this.mkLoadingPage || this.mkLoadingPage.checkPendingRoute) {
            this.routeInterceptorService.isPendingRoute.subscribe(value => {
                this.isPendingRoute = value;
                this.isVisible();
            });
        }
    }
    /**
     * [isVisible description]
     * @method isVisible
     * @return [description]
     */
    isVisible() {
        if (this.hasView && !this.isPendingRequests && !this.isPendingRoute) {
            this.viewContainer.clear();
            this.hasView = false;
        }
        else if (!this.hasView && (this.isPendingRequests || this.isPendingRoute)) {
            this.viewContainer.createEmbeddedView(this.templateRef);
            this.hasView = true;
        }
    }
}
LoadingPageDirective.ɵfac = function LoadingPageDirective_Factory(t) { return new (t || LoadingPageDirective)(ɵngcc0.ɵɵdirectiveInject(ɵngcc1.HttpObservableService), ɵngcc0.ɵɵdirectiveInject(ɵngcc2.RouteInterceptorService), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.TemplateRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ViewContainerRef)); };
LoadingPageDirective.ɵdir = ɵngcc0.ɵɵdefineDirective({ type: LoadingPageDirective, selectors: [["", "mkLoadingPage", ""]], inputs: { mkLoadingPage: "mkLoadingPage" }, features: [ɵngcc0.ɵɵNgOnChangesFeature] });
LoadingPageDirective.ctorParameters = () => [
    { type: HttpObservableService },
    { type: RouteInterceptorService },
    { type: TemplateRef },
    { type: ViewContainerRef }
];
LoadingPageDirective.propDecorators = {
    mkLoadingPage: [{ type: Input }]
};
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(LoadingPageDirective, [{
        type: Directive,
        args: [{
                selector: '[mkLoadingPage]'
            }]
    }], function () { return [{ type: ɵngcc1.HttpObservableService }, { type: ɵngcc2.RouteInterceptorService }, { type: ɵngcc0.TemplateRef }, { type: ɵngcc0.ViewContainerRef }]; }, { mkLoadingPage: [{
            type: Input
        }] }); })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibG9hZGluZy1wYWdlLmRpcmVjdGl2ZS5qcyIsInNvdXJjZXMiOlsiLi4vLi4vLi4vbGlicmFyeS9hbmd1bGFyLWxvYWRpbmctcGFnZS9zcmMvbGliL2xvYWRpbmctcGFnZS5kaXJlY3RpdmUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLFNBQVMsRUFBRSxLQUFLLEVBQUUsV0FBVyxFQUFFLGdCQUFnQixFQUEyQixNQUFNLGVBQWUsQ0FBQztBQUN6RyxPQUFPLEVBQUUscUJBQXFCLEVBQUUsTUFBTSx3Q0FBd0MsQ0FBQztBQUMvRSxPQUFPLEVBQUUsdUJBQXVCLEVBQUUsTUFBTSwwQ0FBMEMsQ0FBQztBQVVuRjtBQUNDO0FBQ0MsR0FBQzs7OztBQUlILE1BQU0sT0FBTyxvQkFBb0I7QUFBSSxJQVFuQztBQUNEO0FBQ0c7QUFDRztBQUNHO0FBQ0c7QUFFSCxPQURMO0FBQ0osSUFBQyxZQUNVLHFCQUE0QyxFQUM1Qyx1QkFBZ0QsRUFDaEQsV0FBNkIsRUFDN0IsYUFBK0I7QUFDdkMsUUFKUSwwQkFBcUIsR0FBckIscUJBQXFCLENBQXVCO0FBQ3hELFFBQVksNEJBQXVCLEdBQXZCLHVCQUF1QixDQUF5QjtBQUM1RCxRQUFZLGdCQUFXLEdBQVgsV0FBVyxDQUFrQjtBQUN6QyxRQUFZLGtCQUFhLEdBQWIsYUFBYSxDQUFrQjtBQUMxQyxRQW5CUSxzQkFBaUIsR0FBRyxLQUFLLENBQUM7QUFDbEMsUUFBUSxtQkFBYyxHQUFHLEtBQUssQ0FBQztBQUVoQyxRQUFVLFlBQU8sR0FBRyxLQUFLLENBQUM7QUFFMUIsSUFjSyxDQUFDO0FBRU4sSUFBRTtBQUNEO0FBQ0c7QUFFSCxPQURJO0FBQ0osSUFBQyxXQUFXLENBQUMsT0FBMEM7QUFBSyxRQUN6RCxJQUFJLE9BQU8sQ0FBQyxhQUFhLENBQUMsWUFBWSxFQUFFO0FBQzNDLFlBQUssSUFBSSxDQUFDLGFBQWEsR0FBRyxPQUFPLENBQUMsYUFBYSxDQUFDLFlBQVksQ0FBQztBQUM3RCxTQUFJO0FB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LEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQ0EsQUFBQSxBQUVBLEFBSUEsQUFDQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFFQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUNBLEFBQUEsQUFFQSxBQUlBLEFBQ0EsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUNBLEFBQUEsQUF4RUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQWhCQSxBQUFBLEFBQ0EsQUFBQSxBQUZBLEFBQUEsQUFBQSxBQUFBLEFBd0JBLEFBQUEiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBEaXJlY3RpdmUsIElucHV0LCBUZW1wbGF0ZVJlZiwgVmlld0NvbnRhaW5lclJlZiwgT25DaGFuZ2VzLCBTaW1wbGVDaGFuZ2UgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IEh0dHBPYnNlcnZhYmxlU2VydmljZSB9IGZyb20gJy4vaW50ZXJjZXB0b3JzL2h0dHAtb2JzZXJ2YWJsZS5zZXJ2aWNlJztcbmltcG9ydCB7IFJvdXRlSW50ZXJjZXB0b3JTZXJ2aWNlIH0gZnJvbSAnLi9pbnRlcmNlcHRvcnMvcm91dGUtaW50ZXJjZXB0b3Iuc2VydmljZSc7XG5cbi8qXG4gKiBNa0xvYWRpbmdQYWdlIEludGVyZmFjZVxuICovXG5leHBvcnQgaW50ZXJmYWNlIE1rTG9hZGluZ1BhZ2Uge1xuICBjaGVja1BlbmRpbmdIdHRwOiBib29sZWFuO1xuICBjaGVja1BlbmRpbmdSb3V0ZTogYm9vbGVhbjtcbn1cblxuLypcbiAqIG1rTG9hZGluZ1BhZ2UgRGlyZWN0aXZlXG4gKi9cbkBEaXJlY3RpdmUoe1xuICBzZWxlY3RvcjogJ1tta0xvYWRpbmdQYWdlXScsXG59KVxuZXhwb3J0IGNsYXNzIExvYWRpbmdQYWdlRGlyZWN0aXZlIGltcGxlbWVudHMgT25DaGFuZ2VzIHtcbiAgcHVibGljIGlzUGVuZGluZ1JlcXVlc3RzID0gZmFsc2U7XG4gIHB1YmxpYyBpc1BlbmRpbmdSb3V0ZSA9IGZhbHNlO1xuXG4gIHByaXZhdGUgaGFzVmlldyA9IGZhbHNlO1xuXG4gIEBJbnB1dCgpIG1rTG9hZGluZ1BhZ2UhOiBNa0xvYWRpbmdQYWdlO1xuXG4gIC8qKlxuICAgKiBAbWV0aG9kIGNvbnN0cnVjdG9yXG4gICAqIEBwYXJhbSBwcml2YXRlaHR0cE9ic2VydmFibGVTZXJ2aWNlICAgW2Rlc2NyaXB0aW9uXVxuICAgKiBAcGFyYW0gcHJpdmF0ZXJvdXRlSW50ZXJjZXB0b3JTZXJ2aWNlIFtkZXNjcmlwdGlvbl1cbiAgICogQHBhcmFtIHByaXZhdGV0ZW1wbGF0ZVJlZiAgICAgICAgICAgICBbZGVzY3JpcHRpb25dXG4gICAqIEBwYXJhbSBwcml2YXRldmlld0NvbnRhaW5lciAgICAgICAgICAgW2Rlc2NyaXB0aW9uXSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbZGVzY3JpcHRpb25dXG4gICAqL1xuICBjb25zdHJ1Y3RvcihcbiAgICBwcml2YXRlIGh0dHBPYnNlcnZhYmxlU2VydmljZTogSHR0cE9ic2VydmFibGVTZXJ2aWNlLFxuICAgIHByaXZhdGUgcm91dGVJbnRlcmNlcHRvclNlcnZpY2U6IFJvdXRlSW50ZXJjZXB0b3JTZXJ2aWNlLFxuICAgIHByaXZhdGUgdGVtcGxhdGVSZWY6IFRlbXBsYXRlUmVmPGFueT4sXG4gICAgcHJpdmF0ZSB2aWV3Q29udGFpbmVyOiBWaWV3Q29udGFpbmVyUmVmXG4gICkge31cblxuICAvKipcbiAgICogQG1ldGhvZCBuZ09uQ2hhbmdlc1xuICAgKiBAcGFyYW0gY2hhbmdlcyBbZGVzY3JpcHRpb25dXG4gICAqL1xuICBuZ09uQ2hhbmdlcyhjaGFuZ2VzOiB7W3Byb3BLZXk6IHN0cmluZ106IFNpbXBsZUNoYW5nZX0pOiB2b2lkIHtcbiAgICBpZiAoY2hhbmdlcy5ta0xvYWRpbmdQYWdlLmN1cnJlbnRWYWx1ZSkge1xuICAgICAgdGhpcy5ta0xvYWRpbmdQYWdlID0gY2hhbmdlcy5ta0xvYWRpbmdQYWdlLmN1cnJlbnRWYWx1ZTtcbiAgICB9XG4gICAgaWYgKGNoYW5nZXMubWtMb2FkaW5nUGFnZS5maXJzdENoYW5nZSkge1xuICAgICAgdGhpcy5pbml0KCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFtpbml0IGRlc2NyaXB0aW9uXVxuICAgKiBAbWV0aG9kIGluaXRcbiAgICogQHJldHVybiBbZGVzY3JpcHRpb25dXG4gICAqL1xuICBwcml2YXRlIGluaXQoKTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLm1rTG9hZGluZ1BhZ2UgfHwgdGhpcy5ta0xvYWRpbmdQYWdlLmNoZWNrUGVuZGluZ0h0dHApIHtcbiAgICAgIHRoaXMuaHR0cE9ic2VydmFibGVTZXJ2aWNlLmlzUGVuZGluZ1JlcXVlc3RzLnN1YnNjcmliZSh2YWx1ZSA9PiB7XG4gICAgICAgIHRoaXMuaXNQZW5kaW5nUmVxdWVzdHMgPSB2YWx1ZTtcbiAgICAgICAgdGhpcy5pc1Zpc2libGUoKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGlmICghdGhpcy5ta0xvYWRpbmdQYWdlIHx8IHRoaXMubWtMb2FkaW5nUGFnZS5jaGVja1BlbmRpbmdSb3V0ZSkge1xuICAgICAgdGhpcy5yb3V0ZUludGVyY2VwdG9yU2VydmljZS5pc1BlbmRpbmdSb3V0ZS5zdWJzY3JpYmUodmFsdWUgPT4ge1xuICAgICAgICB0aGlzLmlzUGVuZGluZ1JvdXRlID0gdmFsdWU7XG4gICAgICAgIHRoaXMuaXNWaXNpYmxlKCk7XG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogW2lzVmlzaWJsZSBkZXNjcmlwdGlvbl1cbiAgICogQG1ldGhvZCBpc1Zpc2libGVcbiAgICogQHJldHVybiBbZGVzY3JpcHRpb25dXG4gICAqL1xuICBwcml2YXRlIGlzVmlzaWJsZSgpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5oYXNWaWV3ICYmICF0aGlzLmlzUGVuZGluZ1JlcXVlc3RzICYmICF0aGlzLmlzUGVuZGluZ1JvdXRlKSB7XG4gICAgICB0aGlzLnZpZXdDb250YWluZXIuY2xlYXIoKTtcbiAgICAgIHRoaXMuaGFzVmlldyA9IGZhbHNlO1xuICAgIH0gZWxzZSBpZiAoIXRoaXMuaGFzVmlldyAmJiAodGhpcy5pc1BlbmRpbmdSZXF1ZXN0cyB8fCB0aGlzLmlzUGVuZGluZ1JvdXRlKSkge1xuICAgICAgdGhpcy52aWV3Q29udGFpbmVyLmNyZWF0ZUVtYmVkZGVkVmlldyh0aGlzLnRlbXBsYXRlUmVmKTtcbiAgICAgIHRoaXMuaGFzVmlldyA9IHRydWU7XG4gICAgfVxuICB9XG59XG4iXX0=