import { Directive, Input, TemplateRef, ViewContainerRef } from '@angular/core';
import { HttpObservableService } from './interceptors/http-observable.service';
import { RouteInterceptorService } from './interceptors/route-interceptor.service';
/*
 * mkLoadingPage Directive
 */
import * as ɵngcc0 from '@angular/core';
import * as ɵngcc1 from './interceptors/http-observable.service';
import * as ɵngcc2 from './interceptors/route-interceptor.service';
export class LoadingPageDirective {
    /**
     * @method constructor
     * @param privatehttpObservableService   [description]
     * @param privaterouteInterceptorService [description]
     * @param privatetemplateRef             [description]
     * @param privateviewContainer           [description]                                              [description]
     */
    constructor(httpObservableService, routeInterceptorService, templateRef, viewContainer) {
        this.httpObservableService = httpObservableService;
        this.routeInterceptorService = routeInterceptorService;
        this.templateRef = templateRef;
        this.viewContainer = viewContainer;
        this.isPendingRequests = false;
        this.isPendingRoute = false;
        this.hasView = false;
    }
    /**
     * @method ngOnChanges
     * @param changes [description]
     */
    ngOnChanges(changes) {
        if (changes.mkLoadingPage.currentValue) {
            this.mkLoadingPage = changes.mkLoadingPage.currentValue;
        }
        if (changes.mkLoadingPage.firstChange) {
            this.init();
        }
    }
    /**
     * [init description]
     * @method init
     * @return [description]
     */
    init() {
        if (!this.mkLoadingPage || this.mkLoadingPage.checkPendingHttp) {
            this.httpObservableService.isPendingRequests.subscribe(value => {
                this.isPendingRequests = value;
                this.isVisible();
            });
        }
        if (!this.mkLoadingPage || this.mkLoadingPage.checkPendingRoute) {
            this.routeInterceptorService.isPendingRoute.subscribe(value => {
                this.isPendingRoute = value;
                this.isVisible();
            });
        }
    }
    /**
     * [isVisible description]
     * @method isVisible
     * @return [description]
     */
    isVisible() {
        if (this.hasView && !this.isPendingRequests && !this.isPendingRoute) {
            this.viewContainer.clear();
            this.hasView = false;
        }
        else if (!this.hasView && (this.isPendingRequests || this.isPendingRoute)) {
            this.viewContainer.createEmbeddedView(this.templateRef);
            this.hasView = true;
        }
    }
}
LoadingPageDirective.ɵfac = function LoadingPageDirective_Factory(t) { return new (t || LoadingPageDirective)(ɵngcc0.ɵɵdirectiveInject(ɵngcc1.HttpObservableService), ɵngcc0.ɵɵdirectiveInject(ɵngcc2.RouteInterceptorService), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.TemplateRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ViewContainerRef)); };
LoadingPageDirective.ɵdir = ɵngcc0.ɵɵdefineDirective({ type: LoadingPageDirective, selectors: [["", "mkLoadingPage", ""]], inputs: { mkLoadingPage: "mkLoadingPage" }, features: [ɵngcc0.ɵɵNgOnChangesFeature] });
LoadingPageDirective.ctorParameters = () => [
    { type: HttpObservableService },
    { type: RouteInterceptorService },
    { type: TemplateRef },
    { type: ViewContainerRef }
];
LoadingPageDirective.propDecorators = {
    mkLoadingPage: [{ type: Input }]
};
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(LoadingPageDirective, [{
        type: Directive,
        args: [{
                selector: '[mkLoadingPage]'
            }]
    }], function () { return [{ type: ɵngcc1.HttpObservableService }, { type: ɵngcc2.RouteInterceptorService }, { type: ɵngcc0.TemplateRef }, { type: ɵngcc0.ViewContainerRef }]; }, { mkLoadingPage: [{
            type: Input
        }] }); })();

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibG9hZGluZy1wYWdlLmRpcmVjdGl2ZS5qcyIsInNvdXJjZXMiOlsiLi4vLi4vLi4vbGlicmFyeS9hbmd1bGFyLWxvYWRpbmctcGFnZS9zcmMvbGliL2xvYWRpbmctcGFnZS5kaXJlY3RpdmUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLFNBQVMsRUFBRSxLQUFLLEVBQUUsV0FBVyxFQUFFLGdCQUFnQixFQUEyQixNQUFNLGVBQWUsQ0FBQztBQUN6RyxPQUFPLEVBQUUscUJBQXFCLEVBQUUsTUFBTSx3Q0FBd0MsQ0FBQztBQUMvRSxPQUFPLEVBQUUsdUJBQXVCLEVBQUUsTUFBTSwwQ0FBMEMsQ0FBQztBQVVuRjtBQUNBO0FBQ0EsR0FBRzs7OztBQUlILE1BQU0sT0FBTyxvQkFBb0I7QUFBRyxJQVFsQztBQUNGO0FBQ0U7QUFDRTtBQUNFO0FBQ0U7QUFFSixPQURDO0FBQ0wsSUFBRSxZQUNVLHFCQUE0QyxFQUM1Qyx1QkFBZ0QsRUFDaEQsV0FBNkIsRUFDN0IsYUFBK0I7QUFDeEMsUUFKUywwQkFBcUIsR0FBckIscUJBQXFCLENBQXVCO0FBQUMsUUFDN0MsNEJBQXVCLEdBQXZCLHVCQUF1QixDQUF5QjtBQUFDLFFBQ2pELGdCQUFXLEdBQVgsV0FBVyxDQUFrQjtBQUFDLFFBQzlCLGtCQUFhLEdBQWIsYUFBYSxDQUFrQjtBQUMzQyxRQW5CUyxzQkFBaUIsR0FBRyxLQUFLLENBQUM7QUFDbkMsUUFBUyxtQkFBYyxHQUFHLEtBQUssQ0FBQztBQUNoQyxRQUNVLFlBQU8sR0FBRyxLQUFLLENBQUM7QUFDMUIsSUFlSyxDQUFDO0FBQ04sSUFDRTtBQUNGO0FBQ0U7QUFDRSxPQUFDO0FBQ0wsSUFBRSxXQUFXLENBQUMsT0FBMEM7QUFBSSxRQUN4RCxJQUFJLE9BQU8sQ0FBQyxhQUFhLENBQUMsWUFBWSxFQUFFO0FBQzVDLFlBQU0sSUFBSSxDQUFDLGFBQWEsR0FBRyxPQUFPLENBQUMsYUFBYSxDQUFDLFlBQVksQ0FBQztBQUM5RCxTQUFLO0FBQ0wsUUFBSSxJQUFJLE9BQU8sQ0FBQyxhQUFhLENBQUMsV0FBVyxFQUFFO0FBQzNDLFlBQU0sSUFBSSxDQUFDLElBQUksRUFBRSxDQUFDO0FBQ2xCLFNBQUs7QUFDTCxJQUFFLENBQUM7QUFDSCxJQUNFO0FBQ0Y7QUFDRTtBQUNFO0FBRUosT0FESztBQUNMLElBQVUsSUFBSTtBQUFLLFFBQ2YsSUFBSSxDQUFDLElBQUksQ0FBQyxhQUFhLElBQUksSUFBSSxDQUFDLGFBQWEsQ0FBQyxnQkFBZ0IsRUFBRTtBQUNwRSxZQUFNLElBQUksQ0FBQyxxQkFBcUIsQ0FBQyxpQkFBaUIsQ0FBQyxTQUFTLENBQUMsS0FBSyxDQUFDLEVBQUU7QUFDckUsZ0JBQVEsSUFBSSxDQUFDLGlCQUFpQixHQUFHLEtBQUssQ0FBQztBQUN2QyxnQkFBUSxJQUFJLENBQUMsU0FBUyxFQUFFLENBQUM7QUFDekIsWUFBTSxDQUFDLENBQUMsQ0FBQztBQUNULFNBQUs7QUFDTCxRQUNJLElBQUksQ0FBQyxJQUFJLENBQUMsYUFBYSxJQUFJLElBQUksQ0FBQyxhQUFhLENBQUMsaUJBQWlCLEVBQUU7QUFDckUsWUFBTSxJQUFJLENBQUMsdUJBQXVCLENBQUMsY0FBYyxDQUFDLFNBQVMsQ0FBQyxLQUFLLENBQUMsRUFBRTtBQUNwRSxnQkFBUSxJQUFJLENBQUMsY0FBYyxHQUFHLEtBQUssQ0FBQztBQUNwQyxnQkFBUSxJQUFJLENBQUMsU0FBUyxFQUFFLENBQUM7QUFDekIsWUFBTSxDQUFDLENBQUMsQ0FBQztBQUNULFNBQUs7QUFDTCxJQUFFLENBQUM7QUFDSCxJQUNFO0FBQ0Y7QUFDRTtBQUNFO0FBRUosT0FESztBQUNMLElBQVUsU0FBUztBQUFLLFFBQ3BCLElBQUksSUFBSSxDQUFDLE9BQU8sSUFBSSxDQUFDLElBQUksQ0FBQyxpQkFBaUIsSUFBSSxDQUFDLElBQUksQ0FBQyxjQUFjLEVBQUU7QUFDekUsWUFBTSxJQUFJLENBQUMsYUFBYSxDQUFDLEtBQUssRUFBRSxDQUFDO0FBQ2pDLFlBQU0sSUFBSSxDQUFDLE9BQU8sR0FBRyxLQUFLLENBQUM7QUFDM0IsU0FBSztBQUFDLGFBQUssSUFBSSxDQUFDLElBQUksQ0FBQyxPQUFPLElBQUksQ0FBQyxJQUFJLENBQUMsaUJBQWlCLElBQUksSUFBSSxDQUFDLGNBQWMsQ0FBQyxFQUFFO0FBQ2pGLFlBQU0sSUFBSSxDQUFDLGFBQWEsQ0FBQyxrQkFBa0IsQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLENBQUM7QUFDOUQsWUFBTSxJQUFJLENBQUMsT0FBTyxHQUFHLElBQUksQ0FBQztBQUMxQixTQUFLO0FBQ0wsSUFBRSxDQUFDO0FBQ0g7Z0RBekVDLFNBQVMsU0FBQyxrQkFDVCxRQUFRLEVBQUUsaUJBQWlCLGVBQzVCO2tOQUNJO0FBQUM7QUFBOEMsWUFqQjNDLHFCQUFxQjtBQUFJLFlBQ3pCLHVCQUF1QjtBQUFJLFlBRlQsV0FBVztBQUFJLFlBQUYsZ0JBQWdCO0FBQUc7QUFBRztBQUF3Qyw0QkF3Qm5HLEtBQUs7QUFBSTs7Ozs7Ozs7b0JBQUU7QUFBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IERpcmVjdGl2ZSwgSW5wdXQsIFRlbXBsYXRlUmVmLCBWaWV3Q29udGFpbmVyUmVmLCBPbkNoYW5nZXMsIFNpbXBsZUNoYW5nZSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgSHR0cE9ic2VydmFibGVTZXJ2aWNlIH0gZnJvbSAnLi9pbnRlcmNlcHRvcnMvaHR0cC1vYnNlcnZhYmxlLnNlcnZpY2UnO1xuaW1wb3J0IHsgUm91dGVJbnRlcmNlcHRvclNlcnZpY2UgfSBmcm9tICcuL2ludGVyY2VwdG9ycy9yb3V0ZS1pbnRlcmNlcHRvci5zZXJ2aWNlJztcblxuLypcbiAqIE1rTG9hZGluZ1BhZ2UgSW50ZXJmYWNlXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgTWtMb2FkaW5nUGFnZSB7XG4gIGNoZWNrUGVuZGluZ0h0dHA6IGJvb2xlYW47XG4gIGNoZWNrUGVuZGluZ1JvdXRlOiBib29sZWFuO1xufVxuXG4vKlxuICogbWtMb2FkaW5nUGFnZSBEaXJlY3RpdmVcbiAqL1xuQERpcmVjdGl2ZSh7XG4gIHNlbGVjdG9yOiAnW21rTG9hZGluZ1BhZ2VdJyxcbn0pXG5leHBvcnQgY2xhc3MgTG9hZGluZ1BhZ2VEaXJlY3RpdmUgaW1wbGVtZW50cyBPbkNoYW5nZXMge1xuICBwdWJsaWMgaXNQZW5kaW5nUmVxdWVzdHMgPSBmYWxzZTtcbiAgcHVibGljIGlzUGVuZGluZ1JvdXRlID0gZmFsc2U7XG5cbiAgcHJpdmF0ZSBoYXNWaWV3ID0gZmFsc2U7XG5cbiAgQElucHV0KCkgbWtMb2FkaW5nUGFnZSE6IE1rTG9hZGluZ1BhZ2U7XG5cbiAgLyoqXG4gICAqIEBtZXRob2QgY29uc3RydWN0b3JcbiAgICogQHBhcmFtIHByaXZhdGVodHRwT2JzZXJ2YWJsZVNlcnZpY2UgICBbZGVzY3JpcHRpb25dXG4gICAqIEBwYXJhbSBwcml2YXRlcm91dGVJbnRlcmNlcHRvclNlcnZpY2UgW2Rlc2NyaXB0aW9uXVxuICAgKiBAcGFyYW0gcHJpdmF0ZXRlbXBsYXRlUmVmICAgICAgICAgICAgIFtkZXNjcmlwdGlvbl1cbiAgICogQHBhcmFtIHByaXZhdGV2aWV3Q29udGFpbmVyICAgICAgICAgICBbZGVzY3JpcHRpb25dICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFtkZXNjcmlwdGlvbl1cbiAgICovXG4gIGNvbnN0cnVjdG9yKFxuICAgIHByaXZhdGUgaHR0cE9ic2VydmFibGVTZXJ2aWNlOiBIdHRwT2JzZXJ2YWJsZVNlcnZpY2UsXG4gICAgcHJpdmF0ZSByb3V0ZUludGVyY2VwdG9yU2VydmljZTogUm91dGVJbnRlcmNlcHRvclNlcnZpY2UsXG4gICAgcHJpdmF0ZSB0ZW1wbGF0ZVJlZjogVGVtcGxhdGVSZWY8YW55PixcbiAgICBwcml2YXRlIHZpZXdDb250YWluZXI6IFZpZXdDb250YWluZXJSZWZcbiAgKSB7fVxuXG4gIC8qKlxuICAgKiBAbWV0aG9kIG5nT25DaGFuZ2VzXG4gICAqIEBwYXJhbSBjaGFuZ2VzIFtkZXNjcmlwdGlvbl1cbiAgICovXG4gIG5nT25DaGFuZ2VzKGNoYW5nZXM6IHtbcHJvcEtleTogc3RyaW5nXTogU2ltcGxlQ2hhbmdlfSk6IHZvaWQge1xuICAgIGlmIChjaGFuZ2VzLm1rTG9hZGluZ1BhZ2UuY3VycmVudFZhbHVlKSB7XG4gICAgICB0aGlzLm1rTG9hZGluZ1BhZ2UgPSBjaGFuZ2VzLm1rTG9hZGluZ1BhZ2UuY3VycmVudFZhbHVlO1xuICAgIH1cbiAgICBpZiAoY2hhbmdlcy5ta0xvYWRpbmdQYWdlLmZpcnN0Q2hhbmdlKSB7XG4gICAgICB0aGlzLmluaXQoKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogW2luaXQgZGVzY3JpcHRpb25dXG4gICAqIEBtZXRob2QgaW5pdFxuICAgKiBAcmV0dXJuIFtkZXNjcmlwdGlvbl1cbiAgICovXG4gIHByaXZhdGUgaW5pdCgpOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMubWtMb2FkaW5nUGFnZSB8fCB0aGlzLm1rTG9hZGluZ1BhZ2UuY2hlY2tQZW5kaW5nSHR0cCkge1xuICAgICAgdGhpcy5odHRwT2JzZXJ2YWJsZVNlcnZpY2UuaXNQZW5kaW5nUmVxdWVzdHMuc3Vic2NyaWJlKHZhbHVlID0+IHtcbiAgICAgICAgdGhpcy5pc1BlbmRpbmdSZXF1ZXN0cyA9IHZhbHVlO1xuICAgICAgICB0aGlzLmlzVmlzaWJsZSgpO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLm1rTG9hZGluZ1BhZ2UgfHwgdGhpcy5ta0xvYWRpbmdQYWdlLmNoZWNrUGVuZGluZ1JvdXRlKSB7XG4gICAgICB0aGlzLnJvdXRlSW50ZXJjZXB0b3JTZXJ2aWNlLmlzUGVuZGluZ1JvdXRlLnN1YnNjcmliZSh2YWx1ZSA9PiB7XG4gICAgICAgIHRoaXMuaXNQZW5kaW5nUm91dGUgPSB2YWx1ZTtcbiAgICAgICAgdGhpcy5pc1Zpc2libGUoKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBbaXNWaXNpYmxlIGRlc2NyaXB0aW9uXVxuICAgKiBAbWV0aG9kIGlzVmlzaWJsZVxuICAgKiBAcmV0dXJuIFtkZXNjcmlwdGlvbl1cbiAgICovXG4gIHByaXZhdGUgaXNWaXNpYmxlKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLmhhc1ZpZXcgJiYgIXRoaXMuaXNQZW5kaW5nUmVxdWVzdHMgJiYgIXRoaXMuaXNQZW5kaW5nUm91dGUpIHtcbiAgICAgIHRoaXMudmlld0NvbnRhaW5lci5jbGVhcigpO1xuICAgICAgdGhpcy5oYXNWaWV3ID0gZmFsc2U7XG4gICAgfSBlbHNlIGlmICghdGhpcy5oYXNWaWV3ICYmICh0aGlzLmlzUGVuZGluZ1JlcXVlc3RzIHx8IHRoaXMuaXNQZW5kaW5nUm91dGUpKSB7XG4gICAgICB0aGlzLnZpZXdDb250YWluZXIuY3JlYXRlRW1iZWRkZWRWaWV3KHRoaXMudGVtcGxhdGVSZWYpO1xuICAgICAgdGhpcy5oYXNWaWV3ID0gdHJ1ZTtcbiAgICB9XG4gIH1cbn1cbiJdfQ==