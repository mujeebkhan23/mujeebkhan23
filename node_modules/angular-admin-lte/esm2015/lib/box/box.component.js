import { ChangeDetectionStrategy, ChangeDetectorRef, Component, ContentChild, EventEmitter, Input, NgZone, Output, Renderer2, ViewChild } from '@angular/core';
import { BoxContentDirective, BoxFooterDirective, BoxHeaderDirective, BoxToolsDirective } from './box.directive';
import { removeListeners } from '../helpers';
import * as ɵngcc0 from '@angular/core';
import * as ɵngcc1 from '@angular/common';
import * as ɵngcc2 from '../color/color.directive';
import * as ɵngcc3 from '../animations/animations.directive';

const _c0 = ["toggleButtonElement"];
const _c1 = ["removeButtonElement"];
const _c2 = function (a0, a1) { return { "fa-plus": a0, "fa-minus": a1 }; };
function BoxComponent_div_0_div_1_button_6_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementStart(0, "button", 13, 14);
    ɵngcc0.ɵɵelement(2, "i", 15);
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    const ctx_r7 = ɵngcc0.ɵɵnextContext(3);
    ɵngcc0.ɵɵproperty("ngClass", ctx_r7.buttonsStyleClass);
    ɵngcc0.ɵɵadvance(2);
    ɵngcc0.ɵɵproperty("ngClass", ɵngcc0.ɵɵpureFunction2(2, _c2, ctx_r7.isCollapsed, !ctx_r7.isCollapsed));
} }
function BoxComponent_div_0_div_1_button_7_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementStart(0, "button", 13, 16);
    ɵngcc0.ɵɵelement(2, "i", 17);
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    const ctx_r8 = ɵngcc0.ɵɵnextContext(3);
    ɵngcc0.ɵɵproperty("ngClass", ctx_r8.buttonsStyleClass);
} }
function BoxComponent_div_0_div_1_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementStart(0, "div", 9);
    ɵngcc0.ɵɵelementStart(1, "h3", 10);
    ɵngcc0.ɵɵtext(2);
    ɵngcc0.ɵɵprojection(3);
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementStart(4, "div", 11);
    ɵngcc0.ɵɵprojection(5, 1);
    ɵngcc0.ɵɵtemplate(6, BoxComponent_div_0_div_1_button_6_Template, 3, 5, "button", 12);
    ɵngcc0.ɵɵtemplate(7, BoxComponent_div_0_div_1_button_7_Template, 3, 1, "button", 12);
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    const ctx_r1 = ɵngcc0.ɵɵnextContext(2);
    ɵngcc0.ɵɵclassProp("with-border", ctx_r1.headerBorder);
    ɵngcc0.ɵɵproperty("ngClass", ctx_r1.headerStyleClass)("mkColor", ctx_r1.boxColor)("mkColorCondition", ctx_r1.isSolid);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("mkFontColor", ctx_r1.headerColor);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵtextInterpolate1(" ", ctx_r1.header, " ");
    ɵngcc0.ɵɵadvance(4);
    ɵngcc0.ɵɵproperty("ngIf", ctx_r1.isCollapsable);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngIf", ctx_r1.isRemovable);
} }
function BoxComponent_div_0_ng_container_4_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementContainerStart(0);
    ɵngcc0.ɵɵprojection(1, 2);
    ɵngcc0.ɵɵelementContainerEnd();
} }
function BoxComponent_div_0_ng_template_5_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵprojection(0, 3);
} }
function BoxComponent_div_0_div_7_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementStart(0, "div", 18);
    ɵngcc0.ɵɵtext(1);
    ɵngcc0.ɵɵprojection(2, 4);
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    const ctx_r5 = ɵngcc0.ɵɵnextContext(2);
    ɵngcc0.ɵɵproperty("ngClass", ctx_r5.footerStyleClass)("mkFontColor", ctx_r5.footerColor);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵtextInterpolate1(" ", ctx_r5.footer, " ");
} }
function BoxComponent_div_0_div_8_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementStart(0, "div", 19);
    ɵngcc0.ɵɵelement(1, "i", 18);
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    const ctx_r6 = ɵngcc0.ɵɵnextContext(2);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngClass", ctx_r6.loadingStyleClass)("mkFontColor", ctx_r6.loadingColor);
} }
function BoxComponent_div_0_Template(rf, ctx) { if (rf & 1) {
    const _r12 = ɵngcc0.ɵɵgetCurrentView();
    ɵngcc0.ɵɵelementStart(0, "div", 1);
    ɵngcc0.ɵɵlistener("mkCollapseAnimation.done", function BoxComponent_div_0_Template_div_mkCollapseAnimation_done_0_listener($event) { ɵngcc0.ɵɵrestoreView(_r12); const ctx_r11 = ɵngcc0.ɵɵnextContext(); return ctx_r11.removedDone($event); });
    ɵngcc0.ɵɵtemplate(1, BoxComponent_div_0_div_1_Template, 8, 9, "div", 2);
    ɵngcc0.ɵɵelementStart(2, "div", 3);
    ɵngcc0.ɵɵlistener("mkCollapseAnimation.start", function BoxComponent_div_0_Template_div_mkCollapseAnimation_start_2_listener($event) { ɵngcc0.ɵɵrestoreView(_r12); const ctx_r13 = ɵngcc0.ɵɵnextContext(); return ctx_r13.onCollapseStart($event); })("mkCollapseAnimation.done", function BoxComponent_div_0_Template_div_mkCollapseAnimation_done_2_listener($event) { ɵngcc0.ɵɵrestoreView(_r12); const ctx_r14 = ɵngcc0.ɵɵnextContext(); return ctx_r14.onCollapseDone($event); });
    ɵngcc0.ɵɵelementStart(3, "div", 4);
    ɵngcc0.ɵɵtemplate(4, BoxComponent_div_0_ng_container_4_Template, 2, 0, "ng-container", 5);
    ɵngcc0.ɵɵtemplate(5, BoxComponent_div_0_ng_template_5_Template, 1, 0, "ng-template", null, 6, ɵngcc0.ɵɵtemplateRefExtractor);
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵtemplate(7, BoxComponent_div_0_div_7_Template, 3, 3, "div", 7);
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵtemplate(8, BoxComponent_div_0_div_8_Template, 2, 2, "div", 8);
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    const _r3 = ɵngcc0.ɵɵreference(6);
    const ctx_r0 = ɵngcc0.ɵɵnextContext();
    ɵngcc0.ɵɵclassProp("collapsed-box", ctx_r0.isCollapsed && !ctx_r0.isCollapsing)("box-solid", ctx_r0.isSolid);
    ɵngcc0.ɵɵproperty("mkColor", ctx_r0.boxColor)("ngClass", ctx_r0.styleClass)("mkCollapseAnimation", ctx_r0.remove);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngIf", ctx_r0.header || ctx_r0.boxHeaderDirective);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngClass", ctx_r0.contentStyleClass)("mkFontColor", ctx_r0.contentColor)("mkCollapseAnimation", ctx_r0.isCollapsed);
    ɵngcc0.ɵɵadvance(2);
    ɵngcc0.ɵɵproperty("ngIf", ctx_r0.boxHeaderDirective || ctx_r0.boxContentDirective || ctx_r0.boxFooterDirective || ctx_r0.boxToolsDirective)("ngIfElse", _r3);
    ɵngcc0.ɵɵadvance(3);
    ɵngcc0.ɵɵproperty("ngIf", ctx_r0.footer || ctx_r0.boxFooterDirective);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngIf", ctx_r0.isLoading);
} }
const _c3 = [[["mk-box-header"]], [["mk-box-tools"]], [["mk-box-content"]], "*", [["mk-box-footer"]]];
const _c4 = ["mk-box-header", "mk-box-tools", "mk-box-content", "*", "mk-box-footer"];
export class BoxComponent {
    constructor(changeDetectorRef, ngZone, renderer2) {
        this.changeDetectorRef = changeDetectorRef;
        this.ngZone = ngZone;
        this.renderer2 = renderer2;
        this.boxColor = 'default';
        this.buttonsStyleClass = 'btn btn-box-tool';
        this.contentStyleClass = 'box-content-wrapper';
        this.footerStyleClass = 'box-footer';
        this.headerBorder = true;
        this.headerStyleClass = 'box-header';
        this.isCollapsable = true;
        this.isCollapsed = false;
        this.isLoading = false;
        this.isRemovable = true;
        this.isSolid = false;
        this.loadingStyleClass = 'fa fa-refresh fa-spin';
        this.styleClass = 'box';
        this.collapseDone = new EventEmitter();
        this.collapseStart = new EventEmitter();
        this.isCollapsing = false;
        this.remove = false;
        this.removed = false;
        this.listeners = [];
    }
    ngAfterViewInit() {
        this.ngZone.runOutsideAngular(() => {
            if (this.toggleButtonElement) {
                this.listeners.push(this.renderer2.listen(this.toggleButtonElement.nativeElement, 'click', () => {
                    this.isCollapsed = !this.isCollapsed;
                    this.changeDetectorRef.detectChanges();
                }));
            }
            if (this.removeButtonElement) {
                this.listeners.push(this.renderer2.listen(this.removeButtonElement.nativeElement, 'click', () => {
                    this.remove = true;
                    this.changeDetectorRef.detectChanges();
                }));
            }
        });
    }
    ngOnDestroy() {
        removeListeners(this.listeners);
    }
    removedDone(event) {
        if (event.toState === '1') {
            this.removed = true;
        }
    }
    onCollapseStart(event) {
        if (event.fromState !== 'void') {
            this.isCollapsing = true;
            this.collapseStart.emit(event);
        }
    }
    onCollapseDone(event) {
        if (event.fromState !== 'void') {
            this.isCollapsing = false;
            this.collapseDone.emit(event);
        }
    }
}
BoxComponent.ɵfac = function BoxComponent_Factory(t) { return new (t || BoxComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ChangeDetectorRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.NgZone), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.Renderer2)); };
BoxComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: BoxComponent, selectors: [["mk-box"]], contentQueries: function BoxComponent_ContentQueries(rf, ctx, dirIndex) { if (rf & 1) {
        ɵngcc0.ɵɵcontentQuery(dirIndex, BoxHeaderDirective, true);
        ɵngcc0.ɵɵcontentQuery(dirIndex, BoxFooterDirective, true);
        ɵngcc0.ɵɵcontentQuery(dirIndex, BoxContentDirective, true);
        ɵngcc0.ɵɵcontentQuery(dirIndex, BoxToolsDirective, true);
    } if (rf & 2) {
        let _t;
        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.boxHeaderDirective = _t.first);
        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.boxFooterDirective = _t.first);
        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.boxContentDirective = _t.first);
        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.boxToolsDirective = _t.first);
    } }, viewQuery: function BoxComponent_Query(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵviewQuery(_c0, true);
        ɵngcc0.ɵɵviewQuery(_c1, true);
    } if (rf & 2) {
        let _t;
        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.toggleButtonElement = _t.first);
        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.removeButtonElement = _t.first);
    } }, inputs: { boxColor: "boxColor", buttonsStyleClass: "buttonsStyleClass", contentStyleClass: "contentStyleClass", footerStyleClass: "footerStyleClass", headerBorder: "headerBorder", headerStyleClass: "headerStyleClass", isCollapsable: "isCollapsable", isCollapsed: "isCollapsed", isLoading: "isLoading", isRemovable: "isRemovable", isSolid: "isSolid", loadingStyleClass: "loadingStyleClass", styleClass: "styleClass", contentColor: "contentColor", footer: "footer", footerColor: "footerColor", header: "header", headerColor: "headerColor", loadingColor: "loadingColor" }, outputs: { collapseDone: "collapseDone", collapseStart: "collapseStart" }, ngContentSelectors: _c4, decls: 1, vars: 1, consts: [["mkColorProperty", "border-color", "mkColorPrefix", "box", 3, "mkColor", "ngClass", "collapsed-box", "box-solid", "mkCollapseAnimation", "mkCollapseAnimation.done", 4, "ngIf"], ["mkColorProperty", "border-color", "mkColorPrefix", "box", 3, "mkColor", "ngClass", "mkCollapseAnimation", "mkCollapseAnimation.done"], ["mkColorProperty", "background-color", 3, "ngClass", "mkColor", "mkColorCondition", "with-border", 4, "ngIf"], [3, "ngClass", "mkFontColor", "mkCollapseAnimation", "mkCollapseAnimation.start", "mkCollapseAnimation.done"], [1, "box-body"], [4, "ngIf", "ngIfElse"], ["noDirective", ""], [3, "ngClass", "mkFontColor", 4, "ngIf"], ["class", "overlay", 4, "ngIf"], ["mkColorProperty", "background-color", 3, "ngClass", "mkColor", "mkColorCondition"], [1, "box-title", 3, "mkFontColor"], [1, "box-tools", "pull-right"], ["type", "button", 3, "ngClass", 4, "ngIf"], ["type", "button", 3, "ngClass"], ["toggleButtonElement", ""], [1, "fa", 3, "ngClass"], ["removeButtonElement", ""], [1, "fa", "fa-times"], [3, "ngClass", "mkFontColor"], [1, "overlay"]], template: function BoxComponent_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵprojectionDef(_c3);
        ɵngcc0.ɵɵtemplate(0, BoxComponent_div_0_Template, 9, 15, "div", 0);
    } if (rf & 2) {
        ɵngcc0.ɵɵproperty("ngIf", !ctx.removed);
    } }, directives: [ɵngcc1.NgIf, ɵngcc2.BackgroundColorDirective, ɵngcc1.NgClass, ɵngcc3.CollapseAnimationDirective, ɵngcc2.ColorDirective], styles: [".box.collapsed-box[_ngcontent-%COMP%]   .box-body[_ngcontent-%COMP%], .box.collapsed-box[_ngcontent-%COMP%]   .box-footer[_ngcontent-%COMP%]{display:inherit}.box-solid[_ngcontent-%COMP%]{border:1px solid}.box-body[_ngcontent-%COMP%]{background-color:#fff}.box.box-solid.bg-color[_ngcontent-%COMP%] > .box-header[_ngcontent-%COMP%]{color:#fff}"], changeDetection: 0 });
BoxComponent.ctorParameters = () => [
    { type: ChangeDetectorRef },
    { type: NgZone },
    { type: Renderer2 }
];
BoxComponent.propDecorators = {
    boxColor: [{ type: Input }],
    buttonsStyleClass: [{ type: Input }],
    contentStyleClass: [{ type: Input }],
    contentColor: [{ type: Input }],
    footer: [{ type: Input }],
    footerColor: [{ type: Input }],
    footerStyleClass: [{ type: Input }],
    header: [{ type: Input }],
    headerBorder: [{ type: Input }],
    headerColor: [{ type: Input }],
    headerStyleClass: [{ type: Input }],
    isCollapsable: [{ type: Input }],
    isCollapsed: [{ type: Input }],
    isLoading: [{ type: Input }],
    isRemovable: [{ type: Input }],
    isSolid: [{ type: Input }],
    loadingColor: [{ type: Input }],
    loadingStyleClass: [{ type: Input }],
    styleClass: [{ type: Input }],
    collapseDone: [{ type: Output }],
    collapseStart: [{ type: Output }],
    boxHeaderDirective: [{ type: ContentChild, args: [BoxHeaderDirective,] }],
    boxFooterDirective: [{ type: ContentChild, args: [BoxFooterDirective,] }],
    boxContentDirective: [{ type: ContentChild, args: [BoxContentDirective,] }],
    boxToolsDirective: [{ type: ContentChild, args: [BoxToolsDirective,] }],
    toggleButtonElement: [{ type: ViewChild, args: ['toggleButtonElement',] }],
    removeButtonElement: [{ type: ViewChild, args: ['removeButtonElement',] }]
};
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(BoxComponent, [{
        type: Component,
        args: [{
                selector: 'mk-box',
                template: "<div *ngIf=\"!removed\" [mkColor]=\"boxColor\" mkColorProperty=\"border-color\" mkColorPrefix=\"box\" [ngClass]=\"styleClass\" [class.collapsed-box]=\"isCollapsed && !isCollapsing\" [class.box-solid]=\"isSolid\" [mkCollapseAnimation]=\"remove\" (mkCollapseAnimation.done)=\"removedDone($event)\">\n  <div *ngIf=\"header || boxHeaderDirective\" [ngClass]=\"headerStyleClass\" [mkColor]=\"boxColor\" [mkColorCondition]=\"isSolid\" mkColorProperty=\"background-color\" [class.with-border]=\"headerBorder\">\n    <h3 class=\"box-title\" [mkFontColor]=\"headerColor\">\n      {{header}}\n      <ng-content select=\"mk-box-header\"></ng-content>\n    </h3>\n    <div class=\"box-tools pull-right\">\n      <ng-content select=\"mk-box-tools\"></ng-content>\n      <button *ngIf=\"isCollapsable\" type=\"button\" [ngClass]=\"buttonsStyleClass\" #toggleButtonElement>\n        <i class=\"fa\" [ngClass]=\"{'fa-plus': isCollapsed, 'fa-minus': !isCollapsed}\"></i>\n      </button>\n      <button *ngIf=\"isRemovable\" type=\"button\" [ngClass]=\"buttonsStyleClass\" #removeButtonElement>\n        <i class=\"fa fa-times\"></i>\n      </button>\n    </div>\n  </div>\n  <div [ngClass]=\"contentStyleClass\" [mkFontColor]=\"contentColor\" [mkCollapseAnimation]=\"isCollapsed\" (mkCollapseAnimation.start)=\"onCollapseStart($event)\" (mkCollapseAnimation.done)=\"onCollapseDone($event)\">\n    <div class=\"box-body\">\n      <ng-container *ngIf=\"boxHeaderDirective || boxContentDirective || boxFooterDirective || boxToolsDirective; else noDirective\">\n        <ng-content select=\"mk-box-content\"></ng-content>\n      </ng-container>\n      <ng-template #noDirective>\n        <ng-content></ng-content>\n      </ng-template>\n    </div>\n    <div *ngIf=\"footer || boxFooterDirective\" [ngClass]=\"footerStyleClass\" [mkFontColor]=\"footerColor\">\n      {{footer}}\n      <ng-content select=\"mk-box-footer\"></ng-content>\n    </div>\n  </div>\n  <div *ngIf=\"isLoading\" class=\"overlay\">\n    <i [ngClass]=\"loadingStyleClass\" [mkFontColor]=\"loadingColor\"></i>\n  </div>\n</div>\n",
                changeDetection: ChangeDetectionStrategy.OnPush,
                styles: [".box.collapsed-box .box-body,.box.collapsed-box .box-footer{display:inherit}.box-solid{border:1px solid}.box-body{background-color:#fff}.box.box-solid.bg-color>.box-header{color:#fff}"]
            }]
    }], function () { return [{ type: ɵngcc0.ChangeDetectorRef }, { type: ɵngcc0.NgZone }, { type: ɵngcc0.Renderer2 }]; }, { boxColor: [{
            type: Input
        }], buttonsStyleClass: [{
            type: Input
        }], contentStyleClass: [{
            type: Input
        }], footerStyleClass: [{
            type: Input
        }], headerBorder: [{
            type: Input
        }], headerStyleClass: [{
            type: Input
        }], isCollapsable: [{
            type: Input
        }], isCollapsed: [{
            type: Input
        }], isLoading: [{
            type: Input
        }], isRemovable: [{
            type: Input
        }], isSolid: [{
            type: Input
        }], loadingStyleClass: [{
            type: Input
        }], styleClass: [{
            type: Input
        }], collapseDone: [{
            type: Output
        }], collapseStart: [{
            type: Output
        }], contentColor: [{
            type: Input
        }], footer: [{
            type: Input
        }], footerColor: [{
            type: Input
        }], header: [{
            type: Input
        }], headerColor: [{
            type: Input
        }], loadingColor: [{
            type: Input
        }], boxHeaderDirective: [{
            type: ContentChild,
            args: [BoxHeaderDirective]
        }], boxFooterDirective: [{
            type: ContentChild,
            args: [BoxFooterDirective]
        }], boxContentDirective: [{
            type: ContentChild,
            args: [BoxContentDirective]
        }], boxToolsDirective: [{
            type: ContentChild,
            args: [BoxToolsDirective]
        }], toggleButtonElement: [{
            type: ViewChild,
            args: ['toggleButtonElement']
        }], removeButtonElement: [{
            type: ViewChild,
            args: ['removeButtonElement']
        }] }); })();

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYm94LmNvbXBvbmVudC5qcyIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vbGlicmFyeS9hbmd1bGFyLWFkbWluLWx0ZS9zcmMvbGliL2JveC9ib3guY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFFTCx1QkFBdUIsRUFDdkIsaUJBQWlCLEVBQ2pCLFNBQVMsRUFDVCxZQUFZLEVBQ1osWUFBWSxFQUNaLEtBQUssRUFDTCxNQUFNLEVBRU4sTUFBTSxFQUNOLFNBQVMsRUFDVCxTQUFTLEVBQ1YsTUFBTSxlQUFlLENBQUM7QUFHdkIsT0FBTyxFQUFDLG1CQUFtQixFQUFFLGtCQUFrQixFQUFFLGtCQUFrQixFQUFFLGlCQUFpQixFQUFDLE1BQU0saUJBQWlCLENBQUM7QUFDL0csT0FBTyxFQUFDLGVBQWUsRUFBQyxNQUFNLFlBQVksQ0FBQzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFTM0MsTUFBTSxPQUFPLFlBQVk7QUFBRyxJQXFDMUIsWUFDVSxpQkFBb0MsRUFDcEMsTUFBYyxFQUNkLFNBQW9CO0FBQzdCLFFBSFMsc0JBQWlCLEdBQWpCLGlCQUFpQixDQUFtQjtBQUFDLFFBQ3JDLFdBQU0sR0FBTixNQUFNLENBQVE7QUFBQyxRQUNmLGNBQVMsR0FBVCxTQUFTLENBQVc7QUFDaEMsUUF4Q2tCLGFBQVEsR0FBRyxTQUFTLENBQUM7QUFDdkMsUUFBa0Isc0JBQWlCLEdBQUcsa0JBQWtCLENBQUM7QUFDekQsUUFBa0Isc0JBQWlCLEdBQUcscUJBQXFCLENBQUM7QUFDNUQsUUFHa0IscUJBQWdCLEdBQUcsWUFBWSxDQUFDO0FBQ2xELFFBQ2tCLGlCQUFZLEdBQUcsSUFBSSxDQUFDO0FBQ3RDLFFBQ2tCLHFCQUFnQixHQUFHLFlBQVksQ0FBQztBQUNsRCxRQUFrQixr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LFFBQVEsa0JBQ2xCOzs7Ozs7Ozs7Ozs7Ozs7Ozs7O2l0QkFBbUMsa0JBRW5DLGVBQWUsRUFBRSx1QkFBdUIsQ0FBQyxNQUFNLG1PQUNoRDs7Ozs7eWdCQUNJO0FBQUM7QUFBc0MsWUF2QjFDLGlCQUFpQjtBQUNqQixZQUlBLE1BQU07QUFDTixZQUVBLFNBQVM7QUFDVjtBQUFHO0FBRUosdUJBYUcsS0FBSztBQUFLLGdDQUNWLEtBQUs7QUFBSyxnQ0FDVixLQUFLO0FBQUssMkJBQ1YsS0FBSztBQUFLLHFCQUNWLEtBQUs7QUFBSywwQkFDVixLQUFLO0FBQUssK0JBQ1YsS0FBSztBQUFLLHFCQUNWLEtBQUs7QUFBSywyQkFDVixLQUFLO0FBQUssMEJBQ1YsS0FBSztBQUFLLCtCQUNWLEtBQUs7QUFBSyw0QkFDVixLQUFLO0FBQUssMEJBQ1YsS0FBSztBQUFLLHdCQUNWLEtBQUs7QUFBSywwQkFDVixLQUFLO0FBQUssc0JBQ1YsS0FBSztBQUFLLDJCQUNWLEtBQUs7QUFBSyxnQ0FDVixLQUFLO0FBQUsseUJBQ1YsS0FBSztBQUFLLDJCQUVWLE1BQU07QUFBSyw0QkFDWCxNQUFNO0FBQUssaUNBRVgsWUFBWSxTQUFDLGtCQUFrQjtBQUFPLGlDQUN0QyxZQUFZLFNBQUMsa0JBQWtCO0FBQU8sa0NBQ3RDLFlBQVksU0FBQyxtQkFBbUI7QUFBTyxnQ0FDdkMsWUFBWSxTQUFDLGlCQUFpQjtBQUFPLGtDQUVyQyxTQUFTLFNBQUMscUJBQXFCO0FBQU8sa0NBQ3RDLFNBQVMsU0FBQyxxQkFBcUI7QUFBTTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O29CQUFFO0FBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICBBZnRlclZpZXdJbml0LFxuICBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneSxcbiAgQ2hhbmdlRGV0ZWN0b3JSZWYsXG4gIENvbXBvbmVudCxcbiAgQ29udGVudENoaWxkLCBFbGVtZW50UmVmLFxuICBFdmVudEVtaXR0ZXIsXG4gIElucHV0LFxuICBOZ1pvbmUsXG4gIE9uRGVzdHJveSxcbiAgT3V0cHV0LFxuICBSZW5kZXJlcjIsXG4gIFZpZXdDaGlsZFxufSBmcm9tICdAYW5ndWxhci9jb3JlJztcblxuaW1wb3J0IHtBbmltYXRpb25FdmVudH0gZnJvbSAnLi4vYW5pbWF0aW9ucy9hbmltYXRpb25zLmludGVyZmFjZSc7XG5pbXBvcnQge0JveENvbnRlbnREaXJlY3RpdmUsIEJveEZvb3RlckRpcmVjdGl2ZSwgQm94SGVhZGVyRGlyZWN0aXZlLCBCb3hUb29sc0RpcmVjdGl2ZX0gZnJvbSAnLi9ib3guZGlyZWN0aXZlJztcbmltcG9ydCB7cmVtb3ZlTGlzdGVuZXJzfSBmcm9tICcuLi9oZWxwZXJzJztcblxuXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICdtay1ib3gnLFxuICB0ZW1wbGF0ZVVybDogJy4vYm94LmNvbXBvbmVudC5odG1sJyxcbiAgc3R5bGVVcmxzOiBbJy4vYm94LmNvbXBvbmVudC5jc3MnXSxcbiAgY2hhbmdlRGV0ZWN0aW9uOiBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneS5PblB1c2hcbn0pXG5leHBvcnQgY2xhc3MgQm94Q29tcG9uZW50IGltcGxlbWVudHMgQWZ0ZXJWaWV3SW5pdCwgT25EZXN0cm95IHtcbiAgQElucHV0KCkgcHVibGljIGJveENvbG9yID0gJ2RlZmF1bHQnO1xuICBASW5wdXQoKSBwdWJsaWMgYnV0dG9uc1N0eWxlQ2xhc3MgPSAnYnRuIGJ0bi1ib3gtdG9vbCc7XG4gIEBJbnB1dCgpIHB1YmxpYyBjb250ZW50U3R5bGVDbGFzcyA9ICdib3gtY29udGVudC13cmFwcGVyJztcbiAgQElucHV0KCkgcHVibGljIGNvbnRlbnRDb2xvcj86IHN0cmluZztcbiAgQElucHV0KCkgcHVibGljIGZvb3Rlcj86IHN0cmluZztcbiAgQElucHV0KCkgcHVibGljIGZvb3RlckNvbG9yPzogc3RyaW5nO1xuICBASW5wdXQoKSBwdWJsaWMgZm9vdGVyU3R5bGVDbGFzcyA9ICdib3gtZm9vdGVyJztcbiAgQElucHV0KCkgcHVibGljIGhlYWRlcj86IHN0cmluZztcbiAgQElucHV0KCkgcHVibGljIGhlYWRlckJvcmRlciA9IHRydWU7XG4gIEBJbnB1dCgpIHB1YmxpYyBoZWFkZXJDb2xvcj86IHN0cmluZztcbiAgQElucHV0KCkgcHVibGljIGhlYWRlclN0eWxlQ2xhc3MgPSAnYm94LWhlYWRlcic7XG4gIEBJbnB1dCgpIHB1YmxpYyBpc0NvbGxhcHNhYmxlID0gdHJ1ZTtcbiAgQElucHV0KCkgcHVibGljIGlzQ29sbGFwc2VkID0gZmFsc2U7XG4gIEBJbnB1dCgpIHB1YmxpYyBpc0xvYWRpbmcgPSBmYWxzZTtcbiAgQElucHV0KCkgcHVibGljIGlzUmVtb3ZhYmxlID0gdHJ1ZTtcbiAgQElucHV0KCkgcHVibGljIGlzU29saWQgPSBmYWxzZTtcbiAgQElucHV0KCkgcHVibGljIGxvYWRpbmdDb2xvcj86IHN0cmluZztcbiAgQElucHV0KCkgcHVibGljIGxvYWRpbmdTdHlsZUNsYXNzID0gJ2ZhIGZhLXJlZnJlc2ggZmEtc3Bpbic7XG4gIEBJbnB1dCgpIHB1YmxpYyBzdHlsZUNsYXNzID0gJ2JveCc7XG5cbiAgQE91dHB1dCgpIHB1YmxpYyBjb2xsYXBzZURvbmUgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG4gIEBPdXRwdXQoKSBwdWJsaWMgY29sbGFwc2VTdGFydCA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcblxuICBAQ29udGVudENoaWxkKEJveEhlYWRlckRpcmVjdGl2ZSkgcHVibGljIGJveEhlYWRlckRpcmVjdGl2ZT86IEJveEhlYWRlckRpcmVjdGl2ZTtcbiAgQENvbnRlbnRDaGlsZChCb3hGb290ZXJEaXJlY3RpdmUpIHB1YmxpYyBib3hGb290ZXJEaXJlY3RpdmU/OiBCb3hGb290ZXJEaXJlY3RpdmU7XG4gIEBDb250ZW50Q2hpbGQoQm94Q29udGVudERpcmVjdGl2ZSkgcHVibGljIGJveENvbnRlbnREaXJlY3RpdmU/OiBCb3hDb250ZW50RGlyZWN0aXZlO1xuICBAQ29udGVudENoaWxkKEJveFRvb2xzRGlyZWN0aXZlKSBwdWJsaWMgYm94VG9vbHNEaXJlY3RpdmU/OiBCb3hUb29sc0RpcmVjdGl2ZTtcblxuICBAVmlld0NoaWxkKCd0b2dnbGVCdXR0b25FbGVtZW50JykgcHJpdmF0ZSB0b2dnbGVCdXR0b25FbGVtZW50PzogRWxlbWVudFJlZjxIVE1MQnV0dG9uRWxlbWVudD47XG4gIEBWaWV3Q2hpbGQoJ3JlbW92ZUJ1dHRvbkVsZW1lbnQnKSBwcml2YXRlIHJlbW92ZUJ1dHRvbkVsZW1lbnQ/OiBFbGVtZW50UmVmPEhUTUxCdXR0b25FbGVtZW50PjtcblxuICBwdWJsaWMgaXNDb2xsYXBzaW5nID0gZmFsc2U7XG4gIHB1YmxpYyByZW1vdmUgPSBmYWxzZTtcbiAgcHVibGljIHJlbW92ZWQgPSBmYWxzZTtcbiAgcHJpdmF0ZSBsaXN0ZW5lcnM6ICgoKSA9PiB2b2lkKVtdID0gW107XG5cbiAgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSBjaGFuZ2VEZXRlY3RvclJlZjogQ2hhbmdlRGV0ZWN0b3JSZWYsXG4gICAgcHJpdmF0ZSBuZ1pvbmU6IE5nWm9uZSxcbiAgICBwcml2YXRlIHJlbmRlcmVyMjogUmVuZGVyZXIyXG4gICkge31cblxuICBuZ0FmdGVyVmlld0luaXQoKTogdm9pZCB7XG4gICAgdGhpcy5uZ1pvbmUucnVuT3V0c2lkZUFuZ3VsYXIoKCkgPT4ge1xuICAgICAgaWYgKHRoaXMudG9nZ2xlQnV0dG9uRWxlbWVudCkge1xuICAgICAgICB0aGlzLmxpc3RlbmVycy5wdXNoKHRoaXMucmVuZGVyZXIyLmxpc3Rlbih0aGlzLnRvZ2dsZUJ1dHRvbkVsZW1lbnQubmF0aXZlRWxlbWVudCwgJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgIHRoaXMuaXNDb2xsYXBzZWQgPSAhdGhpcy5pc0NvbGxhcHNlZDtcbiAgICAgICAgICB0aGlzLmNoYW5nZURldGVjdG9yUmVmLmRldGVjdENoYW5nZXMoKTtcbiAgICAgICAgfSkpO1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMucmVtb3ZlQnV0dG9uRWxlbWVudCkge1xuICAgICAgICB0aGlzLmxpc3RlbmVycy5wdXNoKHRoaXMucmVuZGVyZXIyLmxpc3Rlbih0aGlzLnJlbW92ZUJ1dHRvbkVsZW1lbnQubmF0aXZlRWxlbWVudCwgJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgIHRoaXMucmVtb3ZlID0gdHJ1ZTtcbiAgICAgICAgICB0aGlzLmNoYW5nZURldGVjdG9yUmVmLmRldGVjdENoYW5nZXMoKTtcbiAgICAgICAgfSkpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgbmdPbkRlc3Ryb3koKTogdm9pZCB7XG4gICAgcmVtb3ZlTGlzdGVuZXJzKHRoaXMubGlzdGVuZXJzKTtcbiAgfVxuXG4gIHB1YmxpYyByZW1vdmVkRG9uZShldmVudDogQW5pbWF0aW9uRXZlbnQpOiB2b2lkIHtcbiAgICBpZiAoZXZlbnQudG9TdGF0ZSA9PT0gJzEnKSB7XG4gICAgICB0aGlzLnJlbW92ZWQgPSB0cnVlO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBvbkNvbGxhcHNlU3RhcnQoZXZlbnQ6IEFuaW1hdGlvbkV2ZW50KTogdm9pZCB7XG4gICAgaWYgKGV2ZW50LmZyb21TdGF0ZSAhPT0gJ3ZvaWQnKSB7XG4gICAgICB0aGlzLmlzQ29sbGFwc2luZyA9IHRydWU7XG4gICAgICB0aGlzLmNvbGxhcHNlU3RhcnQuZW1pdChldmVudCk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIG9uQ29sbGFwc2VEb25lKGV2ZW50OiBBbmltYXRpb25FdmVudCk6IHZvaWQge1xuICAgIGlmIChldmVudC5mcm9tU3RhdGUgIT09ICd2b2lkJykge1xuICAgICAgdGhpcy5pc0NvbGxhcHNpbmcgPSBmYWxzZTtcbiAgICAgIHRoaXMuY29sbGFwc2VEb25lLmVtaXQoZXZlbnQpO1xuICAgIH1cbiAgfVxufVxuIl19