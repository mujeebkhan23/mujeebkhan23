(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{B8hh:function(t,e,o){"use strict";o.r(e),o.d(e,"ChatModule",function(){return I});var a=o("3Pt+"),n=o("ofXK"),i=o("tyNb"),r=o("aieG"),c=o("quSY"),s=o("fXoL"),l=o("tk/3"),b=o("2Vo4"),p=o("lJxs"),h=o("AytR");let d=(()=>{class t{constructor(t){this.http=t,this.userSubject=new b.a({}),this.user=this.userSubject.asObservable()}get userValue(){return this.userSubject.value}getAll(){var t=JSON.parse(localStorage.getItem("token")||"{}").accessToken,e={headers:(new l.d).set("Authorization","Bearer "+t)};return this.http.get(h.a.apiUrl+"/Chats",e).pipe(Object(p.a)(t=>t.data))}getAllgroups(){var t=JSON.parse(localStorage.getItem("token")||"{}").accessToken,e={headers:(new l.d).set("Authorization","Bearer "+t)};return this.http.get(h.a.apiUrl+"/Chats/GetAllGroups",e).pipe(Object(p.a)(t=>t.data))}getAllChatsByGroupId(t){var e=JSON.parse(localStorage.getItem("token")||"{}").accessToken,o={headers:(new l.d).set("Authorization","Bearer "+e)};return this.http.get(`${h.a.apiUrl}/Chats/GetChatByGroupId/${t}`,o).pipe(Object(p.a)(t=>t.data))}getById(t){var e=JSON.parse(localStorage.getItem("token")||"{}").accessToken,o={headers:(new l.d).set("Authorization","Bearer "+e)};return this.http.get(`${h.a.apiUrl}/Chats/${t}`,o).pipe(Object(p.a)(t=>t.data))}create(t){var e=JSON.parse(localStorage.getItem("token")||"{}").accessToken,o={headers:(new l.d).set("Authorization","Bearer "+e)};return this.http.post(h.a.apiUrl+"/Chats/Save",t,o).pipe(Object(p.a)(t=>(localStorage.setItem("Save",JSON.stringify(t)),this.userSubject.next(t),t)))}createGroup(t){var e=JSON.parse(localStorage.getItem("token")||"{}").accessToken,o={headers:(new l.d).set("Authorization","Bearer "+e).set("Content-Type","application/json").set("Accept","*/*")};return this.http.post(h.a.apiUrl+"/Chats/SaveGroup",t,o).pipe(Object(p.a)(t=>(localStorage.setItem("SaveGroup",JSON.stringify(t)),t)))}Update(t,e){var o=JSON.parse(localStorage.getItem("token")||"{}").accessToken,a={headers:(new l.d).set("Authorization","Bearer "+o).set("Content-Type","application/json").set("Accept","*/*")};return this.http.put(h.a.apiUrl+"/Chats/Update/"+t,JSON.stringify(e),a).pipe(Object(p.a)(t=>t.data))}Delete(t){var e=JSON.parse(localStorage.getItem("token")||"{}").accessToken,o={headers:(new l.d).set("Authorization","Bearer "+e)};return this.http.delete(h.a.apiUrl+"/Chats/Delete/"+t,o).pipe(Object(p.a)(t=>t.data))}DeleteGroup(t){var e=JSON.parse(localStorage.getItem("token")||"{}").accessToken,o={headers:(new l.d).set("Authorization","Bearer "+e)};return this.http.delete(h.a.apiUrl+"/Chats/DeleteGroup/"+t,o).pipe(Object(p.a)(t=>t.data))}}return t.\u0275fac=function(e){return new(e||t)(s.Zb(l.b))},t.\u0275prov=s.Gb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var g=o("5eHb"),u=o("IHM0");class f{constructor(){this.id=0,this.createdByName="",this.name="",this.type="",this.userId="",this.groupId=0,this.createdByName=""}}function m(t,e){if(1&t){const t=s.Tb();s.Rb(0,"ul",10),s.Rb(1,"li",11),s.cc("click",function(){s.zc(t);const o=e.$implicit;return s.ec().onGroupSelection(o.groupId)}),s.Rb(2,"button",12),s.Jc(3),s.Qb(),s.Rb(4,"span",13),s.Rb(5,"button",14),s.cc("click",function(){s.zc(t);const o=e.$implicit;return s.ec().DeleteGroup(o)}),s.Mb(6,"i",15),s.Qb(),s.Qb(),s.Qb(),s.Qb()}if(2&t){const t=e.$implicit;s.xb(3),s.Lc(" ",t.name," ")}}let y=(()=>{class t{constructor(t,e,o){this.chatservice=t,this.toastr=e,this.messageService=o,this.messages=[],this.listgroup=[],this.objgroup=new f,this.subscription=new c.a,this.notifyGroup=new s.n}ngOnInit(){this.getData(),this.subscription=this.messageService.getMessage().subscribe(t=>{this.listgroup.push(t.data)})}onGroupSelection(t){this.notifyGroup.emit(t)}SaveGroup(t){0==this.objgroup.id&&(this.listgroup.push(t),this.chatservice.createGroup(t).subscribe(t=>{this.getData(),console.log("Group Data Saved")},t=>{console.log("Group Data could not be saved"),console.log(t)}),this.objgroup=new f)}getData(){this.chatservice.getAllgroups().subscribe(t=>{this.listgroup=t,console.log(t)},t=>console.log(t))}DeleteGroup(t){1==confirm(" Do you want to delete ?")&&this.chatservice.DeleteGroup(t.id).subscribe(t=>{this.getData(),console.log("Group delete successfully!")},t=>{this.getData()})}ngOnDestroy(){this.subscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(s.Kb(d),s.Kb(g.b),s.Kb(u.a))},t.\u0275cmp=s.Eb({type:t,selectors:[["app-grouplist"]],outputs:{notifyGroup:"notifyGroup"},decls:14,vars:2,consts:[[1,"form-group"],[1,"input-group","form-group"],["type","text","placeholder","Create Group","ngModel","","required","","autocomplete","off",1,"form-control",3,"ngModel","ngModelChange"],[1,"input-group-btn"],["data-toggle","tooltip","data-placement","left","title","Add Group",1,"btn","btn-primary",3,"click"],[1,"fa","fa-users"],[1,"table-responsive","panel","panel-success",2,"border-color","#3C8DBC"],["cellspacing","0",1,"table","table-striped","table-bordered"],[1,"text-center",2,"background-color","#3c8dbc","color","white"],["class","group",4,"ngFor","ngForOf"],[1,"group"],[3,"click"],["type","button",1,"btn","btn-primary"],[2,"padding-left","20px"],["ngClass","status-button btn btn-sm btn-danger","data-toggle","tooltip","data-placement","left","title","Delete Group",3,"click"],[1,"fa","fa-trash-o"]],template:function(t,e){1&t&&(s.Rb(0,"div",0),s.Rb(1,"div",1),s.Rb(2,"input",2),s.cc("ngModelChange",function(t){return e.objgroup.name=t}),s.Qb(),s.Rb(3,"div",3),s.Rb(4,"button",4),s.cc("click",function(){return e.SaveGroup(e.objgroup)}),s.Mb(5,"i",5),s.Qb(),s.Qb(),s.Qb(),s.Qb(),s.Rb(6,"div",6),s.Rb(7,"table",7),s.Rb(8,"thead"),s.Rb(9,"tr"),s.Rb(10,"th",8),s.Jc(11,"Groups"),s.Qb(),s.Qb(),s.Qb(),s.Rb(12,"tbody"),s.Hc(13,m,7,1,"ul",9),s.Qb(),s.Qb(),s.Qb()),2&t&&(s.xb(2),s.lc("ngModel",e.objgroup.name),s.xb(11),s.lc("ngForOf",e.listgroup))},directives:[a.a,a.i,a.l,a.o,n.m,n.l],styles:["tbody[_ngcontent-%COMP%]{display:block;height:550px}.group[_ngcontent-%COMP%]{margin:0 0 2em;list-style-type:none;padding:0}.group[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{cursor:pointer;position:relative;left:0;margin:.5em;padding:.3em 0;height:1.6em;border-radius:4px;text-align:center}"]}),t})();const v=["scrollMe"];function C(t,e){if(1&t&&(s.Rb(0,"div",20),s.Rb(1,"div",21),s.Rb(2,"a",22),s.Mb(3,"i"),s.Qb(),s.Qb(),s.Rb(4,"div",23),s.Rb(5,"div",24),s.Rb(6,"p"),s.Rb(7,"span",25),s.Jc(8),s.Qb(),s.Mb(9,"br"),s.Jc(10),s.Rb(11,"span",26),s.Mb(12,"i",27),s.Jc(13),s.fc(14,"date"),s.Qb(),s.Qb(),s.Qb(),s.Qb(),s.Qb()),2&t){const t=s.ec().$implicit;s.xb(8),s.Kc(t.createdByName),s.xb(2),s.Lc(" ",t.plainMessage," "),s.xb(3),s.Lc(" ",s.hc(14,3,t.addedDate,"shortTime"),"")}}function M(t,e){if(1&t&&(s.Rb(0,"div",28),s.Rb(1,"div",21),s.Rb(2,"a",29),s.Mb(3,"img",30),s.Mb(4,"i"),s.Qb(),s.Qb(),s.Rb(5,"div",23),s.Rb(6,"div",24),s.Rb(7,"p"),s.Rb(8,"span",31),s.Jc(9),s.Qb(),s.Mb(10,"br"),s.Jc(11),s.Rb(12,"span",26),s.Mb(13,"i",27),s.Jc(14),s.fc(15,"date"),s.Qb(),s.Qb(),s.Qb(),s.Qb(),s.Qb()),2&t){const t=s.ec().$implicit,e=s.ec();s.xb(3),s.lc("src",e.profileImage,s.Bc),s.xb(6),s.Kc(t.createdByName),s.xb(2),s.Lc(" ",t.plainMessage," "),s.xb(3),s.Lc(" ",s.hc(15,4,t.addedDate,"shortTime"),"")}}function O(t,e){if(1&t&&(s.Rb(0,"ul"),s.Rb(1,"div",15),s.Rb(2,"div",16),s.Rb(3,"div",17),s.Hc(4,C,15,6,"div",18),s.Hc(5,M,16,7,"div",19),s.Qb(),s.Qb(),s.Qb(),s.Qb()),2&t){const t=e.$implicit,o=s.ec();s.xb(4),s.lc("ngIf",o.myUserId===t.createdBy),s.xb(1),s.lc("ngIf",o.myUserId!==t.createdBy)}}let R=(()=>{class t{constructor(t,e){this.chatservice=t,this.cdref=e,this.listchildchat=[],this.myUserId="",this.notifySelect=new s.n,this.notifyDelete=new s.n,this.notifyshowedit=new s.n}ngOnInit(){this.myUserId=JSON.parse(localStorage.getItem("UserId")||"{}"),this.profileImage=JSON.parse(localStorage.getItem("ImagePath")||"{}"),this.scrollToBottom()}ngAfterContentChecked(){this.cdref.detectChanges(),this.scrollToBottom()}scrollToBottom(){try{this.myScrollContainer.nativeElement.scrollTop=this.myScrollContainer.nativeElement.scrollTop}catch(t){}}ngOnChanges(t){t.listchildchat&&!t.listchildchat.isFirstChange()&&(this.listchildchat=t.listchildchat.currentValue)}onSelect(t){this.notifySelect.emit(t)}onDelete(t){this.notifyDelete.emit(t)}showedit(){this.notifyshowedit.emit()}}return t.\u0275fac=function(e){return new(e||t)(s.Kb(d),s.Kb(s.h))},t.\u0275cmp=s.Eb({type:t,selectors:[["app-list-chat"]],viewQuery:function(t,e){if(1&t&&s.Oc(v,!0),2&t){let t;s.xc(t=s.dc())&&(e.myScrollContainer=t.first)}},inputs:{listchildchat:"listchildchat"},outputs:{notifySelect:"notifySelect",notifyDelete:"notifyDelete",notifyshowedit:"notifyshowedit"},features:[s.vb],decls:20,vars:2,consts:[["rel","preconnect","href",s.Nc("https://fonts.gstatic.com")],["href",s.Nc("https://fonts.googleapis.com/css2?family=Roboto:wght@300;400&display=swap"),"rel","stylesheet"],[1,"table-responsive","panel","panel-success"],["cellspacing","0",1,"table","table-striped","table-bordered"],[1,"text-center",2,"background-color","#3c8dbc","color","white","font-size","15px"],[2,"float","right"],["data-toggle","tooltip","data-placement","left","title","Video Call",1,"btn","btn-primary","btn-md",2,"border-radius","50px"],[1,"fa","fa-video-camera"],["data-toggle","tooltip","data-placement","left","title","Audio Call",1,"btn","btn-primary","btn-md",2,"border-radius","50px"],[1,"fa","fa-phone"],["data-toggle","tooltip","data-placement","left","title","Add Members",1,"btn","btn-primary","btn-md",2,"border-radius","50px"],[1,"fa","fa-user-plus"],[3,"scrollTop"],["scrollMe",""],[4,"ngFor","ngForOf"],[1,"col-md-11"],["id","chat",1,"panel"],[1,"chats"],["class","chat",4,"ngIf"],["class","chat chat-left",4,"ngIf"],[1,"chat"],[1,"chat-avatar"],["data-toggle","tooltip","href","#/lawyerprofile","data-placement","right","title","","data-original-title","June Lane",1,"avatar","avatar-online"],[1,"chat-body"],[1,"chat-content"],[1,"UserNameS"],[1,"chat-time"],[1,"fa","fa-clock-o","fa-fw"],[1,"chat","chat-left"],["data-toggle","tooltip","href","#","data-placement","left","title","","data-original-title","Edward Fletcher",1,"avatar","avatar-online"],["alt","User Image",1,"img-circle",3,"src"],[1,"UserNameR"]],template:function(t,e){if(1&t&&(s.Mb(0,"link",0),s.Mb(1,"link",1),s.Rb(2,"div",2),s.Rb(3,"table",3),s.Rb(4,"thead"),s.Rb(5,"tr"),s.Rb(6,"th",4),s.Jc(7,"Chat "),s.Rb(8,"span",5),s.Rb(9,"button",6),s.Mb(10,"i",7),s.Qb(),s.Jc(11,"\xa0\xa0 "),s.Rb(12,"button",8),s.Mb(13,"i",9),s.Qb(),s.Jc(14,"\xa0\xa0 "),s.Rb(15,"button",10),s.Mb(16,"i",11),s.Qb(),s.Qb(),s.Qb(),s.Qb(),s.Qb(),s.Rb(17,"tbody",12,13),s.Hc(19,O,6,2,"ul",14),s.Qb(),s.Qb(),s.Qb()),2&t){const t=s.yc(18);s.xb(17),s.lc("scrollTop",t.scrollHeight),s.xb(2),s.lc("ngForOf",e.listchildchat)}},directives:[n.m,n.n],pipes:[n.e],styles:['@import url("https://fonts.googleapis.com/css2?family=Roboto:wght@300;400&display=swap");tbody[_ngcontent-%COMP%]{display:block;height:550px;overflow-y:auto;overflow-x:hidden}.chats[_ngcontent-%COMP%]{padding:5px}.chat-avatar[_ngcontent-%COMP%]{float:right}.chat-body[_ngcontent-%COMP%]{display:block;margin:10px 30px 0 0;overflow:hidden}.chat-body[_ngcontent-%COMP%]:first-child{margin-top:0}.chat-content[_ngcontent-%COMP%]{position:relative;display:block;float:right;max-width:100%;padding:8px 15px;margin:0 20px 10px 0;clear:both;color:#fff;background-color:#62a8ea;border-radius:4px;box-shadow:0 1px 4px 0 rgba(0,0,0,.37);font-family:sans-serif;font-weight:600;letter-spacing:.5px}.chat-content[_ngcontent-%COMP%]:before{position:absolute;top:10px;right:-10px;width:0;height:0;content:"";border:5px solid transparent;border-left-color:#62a8ea}.chat-content[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]:last-child{margin-bottom:0}.chat-content[_ngcontent-%COMP%] + .chat-content[_ngcontent-%COMP%]:before{border-color:transparent}.chat-time[_ngcontent-%COMP%]{margin-top:20px}.chat-time[_ngcontent-%COMP%], .UserNameS[_ngcontent-%COMP%]{display:block;float:right;font-size:11px;color:hsla(0,0%,100%,.6)}.UserNameR[_ngcontent-%COMP%], .UserNameS[_ngcontent-%COMP%]{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif}.UserNameR[_ngcontent-%COMP%]{display:block;float:right;font-size:11px;color:#62a8ea}.chat-left[_ngcontent-%COMP%]   .chat-avatar[_ngcontent-%COMP%]{float:left}.chat-left[_ngcontent-%COMP%]   .chat-body[_ngcontent-%COMP%]{margin-right:0;margin-left:30px}.chat-left[_ngcontent-%COMP%]   .chat-content[_ngcontent-%COMP%]{float:left;margin:0 0 10px 20px;color:#76838f;background-color:#dfe9ef}.chat-left[_ngcontent-%COMP%]   .chat-content[_ngcontent-%COMP%]:before{right:auto;left:-10px;border-right-color:#dfe9ef;border-left-color:transparent}.chat-left[_ngcontent-%COMP%]   .chat-content[_ngcontent-%COMP%] + .chat-content[_ngcontent-%COMP%]:before{border-color:transparent}.chat-left[_ngcontent-%COMP%]   .chat-time[_ngcontent-%COMP%]{color:#a3afb7}.avatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;max-width:100%;height:auto;border:0;border-radius:1000px}.chat-avatar[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{width:30px}.avatar[_ngcontent-%COMP%]{position:relative;display:inline-block;width:40px;white-space:nowrap;border-radius:1000px;vertical-align:bottom}']}),t})(),S=(()=>{class t{constructor(t,e){this.chatservice=t,this.toastr=e,this.objeditchat=new r.a,this.notifyCancel=new s.n,this.notifyCreate=new s.n,this.notifyUpdate=new s.n}ngOnInit(){}onSave(){0==this.objeditchat.id?this.notifyCreate.emit(this.objeditchat):this.notifyUpdate.emit(this.objeditchat)}onCancel(){this.objeditchat=new r.a,this.notifyCancel.emit()}}return t.\u0275fac=function(e){return new(e||t)(s.Kb(d),s.Kb(g.b))},t.\u0275cmp=s.Eb({type:t,selectors:[["app-edit-chat"]],inputs:{objeditchat:"objeditchat"},outputs:{notifyCancel:"notifyCancel",notifyCreate:"notifyCreate",notifyUpdate:"notifyUpdate"},decls:6,vars:1,consts:[[1,"form-group"],[1,"input-group"],["type","text","placeholder","Type a message","autocomplete","off",1,"form-control",2,"border-radius","3px",3,"ngModel","ngModelChange","keydown.enter"],[1,"input-group-btn"],[1,"btn","btn-primary",3,"click"],["aria-hidden","true",1,"fa","fa-paper-plane"]],template:function(t,e){1&t&&(s.Rb(0,"div",0),s.Rb(1,"div",1),s.Rb(2,"input",2),s.cc("ngModelChange",function(t){return e.objeditchat.plainMessage=t})("keydown.enter",function(){return e.onSave()}),s.Qb(),s.Rb(3,"div",3),s.Rb(4,"button",4),s.cc("click",function(){return e.onSave()}),s.Mb(5,"i",5),s.Qb(),s.Qb(),s.Qb(),s.Qb()),2&t&&(s.xb(2),s.lc("ngModel",e.objeditchat.plainMessage))},directives:[a.a,a.i,a.l],styles:[""]}),t})(),w=(()=>{class t{constructor(t,e,o,a,n,i){this.route=t,this.router=e,this.changeDetection=o,this.chatService=a,this.toastr=n,this.messageService=i,this.activeGroupId=0,this.myId="",this.listchat=[],this.objchat=r.a,this.listgroup=[],this.subscription=new c.a,this.messages=[]}onSelectGroup(t){this.activeGroupId=t,this.getChatData()}getChatData(){this.chatService.getAllChatsByGroupId(this.activeGroupId).subscribe(t=>{this.listchat=t,console.log(t)},t=>console.log(t)),this.objchat=new r.a}ngOnInit(){this.subscription=this.messageService.getMessage().subscribe(t=>{this.listchat.push(t.data)})}ngOnDestroy(){}onCreate(t){"undefined"!=this.objchat.Id&&0!=this.objchat.Id||(t.groupId=this.activeGroupId,this.chatService.create(t).subscribe(t=>{this.getChatData(),this.toastr.success("Message Sent successfully","Message"),console.log("User Profile Data Saved")},t=>{console.log("User Profile Data could not be saved"),this.toastr.error("Error","User Profile Data Couldn't Save"),console.log(t)}),this.objchat=new r.a)}onUpdate(t){this.objchat=t}onSelect(t){this.objchat=t}}return t.\u0275fac=function(e){return new(e||t)(s.Kb(i.a),s.Kb(i.h),s.Kb(s.h),s.Kb(d),s.Kb(g.b),s.Kb(u.a))},t.\u0275cmp=s.Eb({type:t,selectors:[["app-chat-comp"]],decls:16,vars:2,consts:[[1,"row"],[1,"col-md-2"],[1,"card-body"],[3,"notifyGroup"],[1,"col-md-10"],[1,"card-header"],[3,"listchildchat"],[1,"col-md-12"],[3,"objeditchat","notifyCreate"]],template:function(t,e){1&t&&(s.Rb(0,"div",0),s.Rb(1,"div",1),s.Rb(2,"div",2),s.Rb(3,"div"),s.Rb(4,"app-grouplist",3),s.cc("notifyGroup",function(t){return e.onSelectGroup(t)}),s.Qb(),s.Qb(),s.Qb(),s.Qb(),s.Rb(5,"div",4),s.Mb(6,"div",5),s.Rb(7,"div",2),s.Rb(8,"div"),s.Mb(9,"app-list-chat",6),s.Qb(),s.Qb(),s.Rb(10,"div",0),s.Rb(11,"div",7),s.Mb(12,"div",5),s.Rb(13,"div",2),s.Rb(14,"div"),s.Rb(15,"app-edit-chat",8),s.cc("notifyCreate",function(t){return e.onCreate(t)}),s.Qb(),s.Qb(),s.Qb(),s.Qb(),s.Qb(),s.Qb(),s.Qb()),2&t&&(s.xb(9),s.lc("listchildchat",e.listchat),s.xb(6),s.lc("objeditchat",e.objchat))},directives:[y,R,S],styles:[""]}),t})();const Q=[{path:"",component:w}];let x=(()=>{class t{}return t.\u0275mod=s.Ib({type:t}),t.\u0275inj=s.Hb({factory:function(e){return new(e||t)},imports:[[i.j.forChild(Q)],i.j]}),t})(),I=(()=>{class t{}return t.\u0275mod=s.Ib({type:t,bootstrap:[w]}),t.\u0275inj=s.Hb({factory:function(e){return new(e||t)},imports:[[x,a.e,n.c]]}),t})()}}]);